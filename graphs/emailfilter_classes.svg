<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: classes_emailfilter Pages: 1 -->
<svg width="1875pt" height="815pt"
 viewBox="0.00 0.00 1875.25 815.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 811)">
<title>classes_emailfilter</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-811 1871.25,-811 1871.25,4 -4,4"/>
<!-- emailfilter.models.Category -->
<g id="node1" class="node">
<title>emailfilter.models.Category</title>
<polygon fill="none" stroke="black" points="350.38,-58.25 350.38,-164.75 453.38,-164.75 453.38,-58.25 350.38,-58.25"/>
<text text-anchor="start" x="377.12" y="-147.45" font-family="Times,serif" font-size="14.00">Category</text>
<polyline fill="none" stroke="black" points="350.38,-140.25 453.38,-140.25"/>
<text text-anchor="start" x="358.38" y="-122.95" font-family="Times,serif" font-size="14.00">description : str</text>
<text text-anchor="start" x="358.38" y="-106.45" font-family="Times,serif" font-size="14.00">foldername : str</text>
<text text-anchor="start" x="358.38" y="-89.95" font-family="Times,serif" font-size="14.00">name : str</text>
<polyline fill="none" stroke="black" points="350.38,-82.75 453.38,-82.75"/>
<text text-anchor="start" x="400" y="-65.45" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- emailfilter.config_manager.ConfigManager -->
<g id="node2" class="node">
<title>emailfilter.config_manager.ConfigManager</title>
<polygon fill="none" stroke="black" points="458.25,-309 458.25,-432 641.5,-432 641.5,-309 458.25,-309"/>
<text text-anchor="start" x="506.75" y="-414.7" font-family="Times,serif" font-size="14.00">ConfigManager</text>
<polyline fill="none" stroke="black" points="458.25,-407.5 641.5,-407.5"/>
<text text-anchor="start" x="466.25" y="-390.2" font-family="Times,serif" font-size="14.00">accounts : List[EmailAccount]</text>
<text text-anchor="start" x="466.25" y="-373.7" font-family="Times,serif" font-size="14.00">config_path : str</text>
<text text-anchor="start" x="466.25" y="-357.2" font-family="Times,serif" font-size="14.00">openai_api_key : Optional[str]</text>
<text text-anchor="start" x="466.25" y="-340.7" font-family="Times,serif" font-size="14.00">options</text>
<polyline fill="none" stroke="black" points="458.25,-333.5 641.5,-333.5"/>
<text text-anchor="start" x="505.62" y="-316.2" font-family="Times,serif" font-size="14.00">validate(): None</text>
</g>
<!-- emailfilter.email_processor.EmailProcessor -->
<g id="node6" class="node">
<title>emailfilter.email_processor.EmailProcessor</title>
<polygon fill="none" stroke="black" points="45.12,-576.25 45.12,-748.75 824.62,-748.75 824.62,-576.25 45.12,-576.25"/>
<text text-anchor="start" x="392.12" y="-731.45" font-family="Times,serif" font-size="14.00">EmailProcessor</text>
<polyline fill="none" stroke="black" points="45.12,-724.25 824.62,-724.25"/>
<text text-anchor="start" x="390.62" y="-706.95" font-family="Times,serif" font-size="14.00">config_manager</text>
<text text-anchor="start" x="390.62" y="-690.45" font-family="Times,serif" font-size="14.00">imap_manager</text>
<text text-anchor="start" x="390.62" y="-673.95" font-family="Times,serif" font-size="14.00">state_manager</text>
<polyline fill="none" stroke="black" points="45.12,-666.75 824.62,-666.75"/>
<text text-anchor="start" x="53.12" y="-649.45" font-family="Times,serif" font-size="14.00">categorize_emails(client: IMAPClient, emails: Dict[int, Email], account, batch_size: int): Dict[int, Tuple[Email, str]]</text>
<text text-anchor="start" x="53.12" y="-632.95" font-family="Times,serif" font-size="14.00">process_account(account: EmailAccount): Dict[str, Dict[str, int]]</text>
<text text-anchor="start" x="53.12" y="-616.45" font-family="Times,serif" font-size="14.00">process_all_accounts(): Dict[str, Dict[str, Dict[str, int]]]</text>
<text text-anchor="start" x="53.12" y="-599.95" font-family="Times,serif" font-size="14.00">process_categorized_emails(client: IMAPClient, categorized_emails: Dict[int, Tuple[Email, str]], account, current_folder: str): Dict[str, int]</text>
<text text-anchor="start" x="53.12" y="-583.45" font-family="Times,serif" font-size="14.00">start_monitoring(): None</text>
</g>
<!-- emailfilter.config_manager.ConfigManager&#45;&gt;emailfilter.email_processor.EmailProcessor -->
<g id="edge1" class="edge">
<title>emailfilter.config_manager.ConfigManager&#45;&gt;emailfilter.email_processor.EmailProcessor</title>
<path fill="none" stroke="black" d="M525.77,-432.29C510.69,-470.32 490.92,-520.18 473.67,-563.68"/>
<polygon fill="black" stroke="black" points="473.63,-563.77 475.14,-570.82 469.21,-574.93 467.7,-567.87 473.63,-563.77"/>
<text text-anchor="middle" x="546.93" y="-486.7" font-family="Times,serif" font-size="14.00" fill="green">config_manager</text>
</g>
<!-- emailfilter.models.Email -->
<g id="node3" class="node">
<title>emailfilter.models.Email</title>
<polygon fill="none" stroke="black" points="646.75,-17 646.75,-206 1025,-206 1025,-17 646.75,-17"/>
<text text-anchor="start" x="819.38" y="-188.7" font-family="Times,serif" font-size="14.00">Email</text>
<polyline fill="none" stroke="black" points="646.75,-181.5 1025,-181.5"/>
<text text-anchor="start" x="774.75" y="-164.2" font-family="Times,serif" font-size="14.00">body : str</text>
<text text-anchor="start" x="774.75" y="-147.7" font-family="Times,serif" font-size="14.00">date : str</text>
<text text-anchor="start" x="774.75" y="-131.2" font-family="Times,serif" font-size="14.00">folder : Optional[str]</text>
<text text-anchor="start" x="774.75" y="-114.7" font-family="Times,serif" font-size="14.00">from_addr : str</text>
<text text-anchor="start" x="774.75" y="-98.2" font-family="Times,serif" font-size="14.00">msg_id : Optional[int]</text>
<text text-anchor="start" x="774.75" y="-81.7" font-family="Times,serif" font-size="14.00">raw_message : bytes</text>
<text text-anchor="start" x="774.75" y="-65.2" font-family="Times,serif" font-size="14.00">subject : str</text>
<text text-anchor="start" x="774.75" y="-48.7" font-family="Times,serif" font-size="14.00">to_addr : str</text>
<polyline fill="none" stroke="black" points="646.75,-41.5 1025,-41.5"/>
<text text-anchor="start" x="654.75" y="-24.2" font-family="Times,serif" font-size="14.00">from_message(message: Message, msg_id: Optional[int]): &#39;Email&#39;</text>
</g>
<!-- emailfilter.models.EmailAccount -->
<g id="node4" class="node">
<title>emailfilter.models.EmailAccount</title>
<polygon fill="none" stroke="black" points="1042.88,-0.5 1042.88,-222.5 1358.88,-222.5 1358.88,-0.5 1042.88,-0.5"/>
<text text-anchor="start" x="1161.5" y="-205.2" font-family="Times,serif" font-size="14.00">EmailAccount</text>
<polyline fill="none" stroke="black" points="1042.88,-198 1358.88,-198"/>
<text text-anchor="start" x="1100" y="-180.7" font-family="Times,serif" font-size="14.00">categories : Optional[List[Category]]</text>
<text text-anchor="start" x="1100" y="-164.2" font-family="Times,serif" font-size="14.00">email_address : str</text>
<text text-anchor="start" x="1100" y="-147.7" font-family="Times,serif" font-size="14.00">folders : Optional[List[str]]</text>
<text text-anchor="start" x="1100" y="-131.2" font-family="Times,serif" font-size="14.00">imap_port : int</text>
<text text-anchor="start" x="1100" y="-114.7" font-family="Times,serif" font-size="14.00">imap_server : str</text>
<text text-anchor="start" x="1100" y="-98.2" font-family="Times,serif" font-size="14.00">name : str</text>
<text text-anchor="start" x="1100" y="-81.7" font-family="Times,serif" font-size="14.00">password : str</text>
<text text-anchor="start" x="1100" y="-65.2" font-family="Times,serif" font-size="14.00">ssl : bool</text>
<polyline fill="none" stroke="black" points="1042.88,-58 1358.88,-58"/>
<text text-anchor="start" x="1050.88" y="-40.7" font-family="Times,serif" font-size="14.00">get_category_by_name(name: str): Optional[Category]</text>
<text text-anchor="start" x="1050.88" y="-24.2" font-family="Times,serif" font-size="14.00">get_category_names(): List[str]</text>
<text text-anchor="start" x="1050.88" y="-7.7" font-family="Times,serif" font-size="14.00">get_folder_for_category(category_name: str): str</text>
</g>
<!-- emailfilter.imap_client.EmailAccount -->
<g id="node5" class="node">
<title>emailfilter.imap_client.EmailAccount</title>
<polygon fill="none" stroke="black" points="1376.5,-25.25 1376.5,-197.75 1495.25,-197.75 1495.25,-25.25 1376.5,-25.25"/>
<text text-anchor="start" x="1396.5" y="-180.45" font-family="Times,serif" font-size="14.00">EmailAccount</text>
<polyline fill="none" stroke="black" points="1376.5,-173.25 1495.25,-173.25"/>
<text text-anchor="start" x="1384.5" y="-155.95" font-family="Times,serif" font-size="14.00">email_address : str</text>
<text text-anchor="start" x="1384.5" y="-139.45" font-family="Times,serif" font-size="14.00">folders : list</text>
<text text-anchor="start" x="1384.5" y="-122.95" font-family="Times,serif" font-size="14.00">imap_port : int</text>
<text text-anchor="start" x="1384.5" y="-106.45" font-family="Times,serif" font-size="14.00">imap_server : str</text>
<text text-anchor="start" x="1384.5" y="-89.95" font-family="Times,serif" font-size="14.00">name : str</text>
<text text-anchor="start" x="1384.5" y="-73.45" font-family="Times,serif" font-size="14.00">password : str</text>
<text text-anchor="start" x="1384.5" y="-56.95" font-family="Times,serif" font-size="14.00">ssl : bool</text>
<polyline fill="none" stroke="black" points="1376.5,-49.75 1495.25,-49.75"/>
<text text-anchor="start" x="1434" y="-32.45" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- emailfilter.imap_client.EmailProcessor -->
<g id="node7" class="node">
<title>emailfilter.imap_client.EmailProcessor</title>
<polygon fill="none" stroke="black" points="842.5,-518.5 842.5,-806.5 1867.25,-806.5 1867.25,-518.5 842.5,-518.5"/>
<text text-anchor="start" x="1312.12" y="-789.2" font-family="Times,serif" font-size="14.00">EmailProcessor</text>
<polyline fill="none" stroke="black" points="842.5,-782 1867.25,-782"/>
<text text-anchor="start" x="1297.12" y="-764.7" font-family="Times,serif" font-size="14.00">accounts : list</text>
<text text-anchor="start" x="1297.12" y="-748.2" font-family="Times,serif" font-size="14.00">category_folders</text>
<text text-anchor="start" x="1297.12" y="-731.7" font-family="Times,serif" font-size="14.00">config</text>
<text text-anchor="start" x="1297.12" y="-715.2" font-family="Times,serif" font-size="14.00">config_path : str</text>
<text text-anchor="start" x="1297.12" y="-698.7" font-family="Times,serif" font-size="14.00">idle_timeout</text>
<text text-anchor="start" x="1297.12" y="-682.2" font-family="Times,serif" font-size="14.00">max_emails_per_run</text>
<text text-anchor="start" x="1297.12" y="-665.7" font-family="Times,serif" font-size="14.00">move_emails</text>
<text text-anchor="start" x="1297.12" y="-649.2" font-family="Times,serif" font-size="14.00">options : dict</text>
<text text-anchor="start" x="1297.12" y="-632.7" font-family="Times,serif" font-size="14.00">reconnect_delay</text>
<text text-anchor="start" x="1297.12" y="-616.2" font-family="Times,serif" font-size="14.00">state_manager</text>
<polyline fill="none" stroke="black" points="842.5,-609 1867.25,-609"/>
<text text-anchor="start" x="850.5" y="-591.7" font-family="Times,serif" font-size="14.00">connect_to_account(account: EmailAccount): Optional[IMAPClient]</text>
<text text-anchor="start" x="850.5" y="-575.2" font-family="Times,serif" font-size="14.00">fetch_unprocessed_emails(account: EmailAccount, max_emails: int): Dict[int, Dict[str, Any]]</text>
<text text-anchor="start" x="850.5" y="-558.7" font-family="Times,serif" font-size="14.00">process_categorized_emails(client: IMAPClient, account_name: str, categorized_emails: Dict[str, List[Dict[str, Any]]], category_folders: Dict[str, str], move_emails: bool): Dict[str, int]</text>
<text text-anchor="start" x="850.5" y="-542.2" font-family="Times,serif" font-size="14.00">process_emails_once(): Dict[str, Dict[str, Dict[str, int]]]</text>
<text text-anchor="start" x="850.5" y="-525.7" font-family="Times,serif" font-size="14.00">start_monitoring(): None</text>
</g>
<!-- emailfilter.imap_manager.IMAPManager -->
<g id="node8" class="node">
<title>emailfilter.imap_manager.IMAPManager</title>
<polygon fill="none" stroke="black" points="0,-292.5 0,-448.5 439.75,-448.5 439.75,-292.5 0,-292.5"/>
<text text-anchor="start" x="178.25" y="-431.2" font-family="Times,serif" font-size="14.00">IMAPManager</text>
<polyline fill="none" stroke="black" points="0,-424 439.75,-424"/>
<text text-anchor="start" x="122" y="-406.7" font-family="Times,serif" font-size="14.00">connections : Dict[str, IMAPClient]</text>
<polyline fill="none" stroke="black" points="0,-399.5 439.75,-399.5"/>
<text text-anchor="start" x="8" y="-382.2" font-family="Times,serif" font-size="14.00">connect(account: EmailAccount): Optional[IMAPClient]</text>
<text text-anchor="start" x="8" y="-365.7" font-family="Times,serif" font-size="14.00">disconnect(account_name: str): None</text>
<text text-anchor="start" x="8" y="-349.2" font-family="Times,serif" font-size="14.00">disconnect_all(): None</text>
<text text-anchor="start" x="8" y="-332.7" font-family="Times,serif" font-size="14.00">ensure_folder_exists(client: IMAPClient, folder: str): None</text>
<text text-anchor="start" x="8" y="-316.2" font-family="Times,serif" font-size="14.00">get_emails(client: IMAPClient, folder: str, max_emails: int): Dict[int, Email]</text>
<text text-anchor="start" x="8" y="-299.7" font-family="Times,serif" font-size="14.00">move_email(client: IMAPClient, msg_id: int, target_folder: str): bool</text>
</g>
<!-- emailfilter.imap_manager.IMAPManager&#45;&gt;emailfilter.email_processor.EmailProcessor -->
<g id="edge2" class="edge">
<title>emailfilter.imap_manager.IMAPManager&#45;&gt;emailfilter.email_processor.EmailProcessor</title>
<path fill="none" stroke="black" d="M277.21,-448.83C303.87,-484.8 335.84,-527.92 364.01,-565.91"/>
<polygon fill="black" stroke="black" points="363.77,-565.6 370.56,-568.03 370.92,-575.24 364.13,-572.8 363.77,-565.6"/>
<text text-anchor="middle" x="355.38" y="-486.7" font-family="Times,serif" font-size="14.00" fill="green">imap_manager</text>
</g>
<!-- emailfilter.models.ProcessingOptions -->
<g id="node9" class="node">
<title>emailfilter.models.ProcessingOptions</title>
<polygon fill="none" stroke="black" points="471.38,-41.75 471.38,-181.25 628.38,-181.25 628.38,-41.75 471.38,-41.75"/>
<text text-anchor="start" x="499.25" y="-163.95" font-family="Times,serif" font-size="14.00">ProcessingOptions</text>
<polyline fill="none" stroke="black" points="471.38,-156.75 628.38,-156.75"/>
<text text-anchor="start" x="479.38" y="-139.45" font-family="Times,serif" font-size="14.00">batch_size : int</text>
<text text-anchor="start" x="479.38" y="-122.95" font-family="Times,serif" font-size="14.00">idle_timeout : int</text>
<text text-anchor="start" x="479.38" y="-106.45" font-family="Times,serif" font-size="14.00">max_emails_per_run : int</text>
<text text-anchor="start" x="479.38" y="-89.95" font-family="Times,serif" font-size="14.00">model : str</text>
<text text-anchor="start" x="479.38" y="-73.45" font-family="Times,serif" font-size="14.00">move_emails : bool</text>
<polyline fill="none" stroke="black" points="471.38,-66.25 628.38,-66.25"/>
<text text-anchor="start" x="548" y="-48.95" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- emailfilter.models.ProcessingOptions&#45;&gt;emailfilter.config_manager.ConfigManager -->
<g id="edge3" class="edge">
<title>emailfilter.models.ProcessingOptions&#45;&gt;emailfilter.config_manager.ConfigManager</title>
<path fill="none" stroke="black" d="M525.34,-181.46C519.47,-205.4 515.76,-232.51 519.12,-257.5 520.83,-270.16 523.58,-283.42 526.74,-296.2"/>
<polygon fill="black" stroke="black" points="526.77,-296.3 532.16,-301.1 529.8,-307.91 524.42,-303.12 526.77,-296.3"/>
<text text-anchor="middle" x="539" y="-244.2" font-family="Times,serif" font-size="14.00" fill="green">options</text>
</g>
<!-- emailfilter.models.ProcessingOptions&#45;&gt;emailfilter.config_manager.ConfigManager -->
<g id="edge4" class="edge">
<title>emailfilter.models.ProcessingOptions&#45;&gt;emailfilter.config_manager.ConfigManager</title>
<path fill="none" stroke="black" d="M557.03,-181.43C558.77,-205.49 559.87,-232.68 558.88,-257.5 558.38,-269.93 557.57,-283.11 556.64,-295.9"/>
<polygon fill="black" stroke="black" points="556.65,-295.66 560.18,-301.94 555.74,-307.62 552.21,-301.33 556.65,-295.66"/>
<text text-anchor="middle" x="579.11" y="-244.2" font-family="Times,serif" font-size="14.00" fill="green">options</text>
</g>
<!-- emailfilter.sqlite_state_manager.SQLiteStateManager -->
<g id="node10" class="node">
<title>emailfilter.sqlite_state_manager.SQLiteStateManager</title>
<polygon fill="none" stroke="black" points="811.62,-276 811.62,-465 1822.12,-465 1822.12,-276 811.62,-276"/>
<text text-anchor="start" x="1259.5" y="-447.7" font-family="Times,serif" font-size="14.00">SQLiteStateManager</text>
<polyline fill="none" stroke="black" points="811.62,-440.5 1822.12,-440.5"/>
<text text-anchor="start" x="1242.25" y="-423.2" font-family="Times,serif" font-size="14.00">db_file_path : Optional[str]</text>
<polyline fill="none" stroke="black" points="811.62,-416 1822.12,-416"/>
<text text-anchor="start" x="819.62" y="-398.7" font-family="Times,serif" font-size="14.00">cleanup_old_entries(max_age_days: int): None</text>
<text text-anchor="start" x="819.62" y="-382.2" font-family="Times,serif" font-size="14.00">delete_account_entries(account_name: str): int</text>
<text text-anchor="start" x="819.62" y="-365.7" font-family="Times,serif" font-size="14.00">get_accounts(): List[str]</text>
<text text-anchor="start" x="819.62" y="-349.2" font-family="Times,serif" font-size="14.00">get_category_stats(account_name: Optional[str]): dict</text>
<text text-anchor="start" x="819.62" y="-332.7" font-family="Times,serif" font-size="14.00">get_processed_count(account_name: Optional[str]): int</text>
<text text-anchor="start" x="819.62" y="-316.2" font-family="Times,serif" font-size="14.00">is_email_processed(account_name: str, email: Email): bool</text>
<text text-anchor="start" x="819.62" y="-299.7" font-family="Times,serif" font-size="14.00">mark_email_as_processed(account_name: str, email: Email, category: str): None</text>
<text text-anchor="start" x="819.62" y="-283.2" font-family="Times,serif" font-size="14.00">query_processed_emails(account_name: Optional[str], from_addr: Optional[str], to_addr: Optional[str], subject: Optional[str], category: Optional[str], limit: int, offset: int): List[dict]</text>
</g>
<!-- emailfilter.sqlite_state_manager.SQLiteStateManager&#45;&gt;emailfilter.email_processor.EmailProcessor -->
<g id="edge5" class="edge">
<title>emailfilter.sqlite_state_manager.SQLiteStateManager&#45;&gt;emailfilter.email_processor.EmailProcessor</title>
<path fill="none" stroke="black" d="M998.86,-465.45C943.7,-482.46 887.01,-500.4 833.88,-518 783.66,-534.63 730.19,-553.24 679.26,-571.39"/>
<polygon fill="black" stroke="black" points="679.21,-571.41 674.9,-577.2 667.91,-575.45 672.21,-569.66 679.21,-571.41"/>
<text text-anchor="middle" x="978.51" y="-486.7" font-family="Times,serif" font-size="14.00" fill="green">state_manager</text>
</g>
<!-- emailfilter.sqlite_state_manager.SQLiteStateManager&#45;&gt;emailfilter.imap_client.EmailProcessor -->
<g id="edge6" class="edge">
<title>emailfilter.sqlite_state_manager.SQLiteStateManager&#45;&gt;emailfilter.imap_client.EmailProcessor</title>
<path fill="none" stroke="black" d="M1329.16,-465.25C1330.86,-478.24 1332.65,-491.86 1334.45,-505.6"/>
<polygon fill="black" stroke="black" points="1334.43,-505.46 1339.17,-510.89 1335.99,-517.36 1331.24,-511.93 1334.43,-505.46"/>
<text text-anchor="middle" x="1372.97" y="-486.7" font-family="Times,serif" font-size="14.00" fill="green">state_manager</text>
</g>
</g>
</svg>
