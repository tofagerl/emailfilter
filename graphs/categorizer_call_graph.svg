<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: G Pages: 1 -->
<svg width="2543pt" height="316pt"
 viewBox="0.00 0.00 2543.38 315.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 311.5)">
<title>G</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-311.5 2539.38,-311.5 2539.38,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_api</title>
<polygon fill="lightgrey" stroke="lightgrey" points="292.25,-139.5 292.25,-219.5 556.25,-219.5 556.25,-139.5 292.25,-139.5"/>
<text text-anchor="middle" x="424.25" y="-202.2" font-family="Times,serif" font-size="14.00">API</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_initialization</title>
<polygon fill="lightgrey" stroke="lightgrey" points="116.25,-139.5 116.25,-219.5 284.25,-219.5 284.25,-139.5 116.25,-139.5"/>
<text text-anchor="middle" x="200.25" y="-202.2" font-family="Times,serif" font-size="14.00">Initialization</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_prompt</title>
<polygon fill="lightgrey" stroke="lightgrey" points="860.25,-139.5 860.25,-219.5 1421.25,-219.5 1421.25,-139.5 860.25,-139.5"/>
<text text-anchor="middle" x="1140.75" y="-202.2" font-family="Times,serif" font-size="14.00">Prompt</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_response</title>
<polygon fill="lightgrey" stroke="lightgrey" points="1515.25,-64 1515.25,-219.5 1907.25,-219.5 1907.25,-64 1515.25,-64"/>
<text text-anchor="middle" x="1711.25" y="-202.2" font-family="Times,serif" font-size="14.00">Response</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_utility</title>
<polygon fill="lightgrey" stroke="lightgrey" points="1915.25,-139.5 1915.25,-299.5 2255.25,-299.5 2255.25,-139.5 1915.25,-139.5"/>
<text text-anchor="middle" x="2085.25" y="-282.2" font-family="Times,serif" font-size="14.00">Utility</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_logging</title>
<polygon fill="lightgrey" stroke="lightgrey" points="564.25,-139.5 564.25,-219.5 852.25,-219.5 852.25,-139.5 564.25,-139.5"/>
<text text-anchor="middle" x="708.25" y="-202.2" font-family="Times,serif" font-size="14.00">Logging</text>
</g>
<!-- call_openai_api -->
<g id="node1" class="node">
<title>call_openai_api</title>
<g id="a_node1"><a xlink:title="Call the OpenAI API with the given prompts.">
<polygon fill="lightblue" stroke="black" points="548.12,-187 300.38,-187 300.38,-147.5 548.12,-147.5 548.12,-187"/>
<text text-anchor="middle" x="424.25" y="-169.7" font-family="Arial" font-size="14.00">call_openai_api</text>
<text text-anchor="middle" x="424.25" y="-153.95" font-family="Arial" font-size="14.00">(system_prompt, user_prompt, model)</text>
</a>
</g>
</g>
<!-- ValueError -->
<g id="node18" class="node">
<title>ValueError</title>
<polygon fill="lightblue" stroke="black" points="397.12,-109.75 317.38,-109.75 317.38,-73.75 397.12,-73.75 397.12,-109.75"/>
<text text-anchor="middle" x="357.25" y="-86.33" font-family="Arial" font-size="14.00">ValueError</text>
</g>
<!-- call_openai_api&#45;&gt;ValueError -->
<g id="edge28" class="edge">
<title>call_openai_api&#45;&gt;ValueError</title>
<path fill="none" stroke="black" d="M407,-147.32C398.98,-138.53 389.33,-127.94 380.67,-118.44"/>
<polygon fill="black" stroke="black" points="383.41,-116.25 374.09,-111.22 378.24,-120.97 383.41,-116.25"/>
</g>
<!-- create -->
<g id="node25" class="node">
<title>create</title>
<polygon fill="lightblue" stroke="black" points="469.25,-109.75 415.25,-109.75 415.25,-73.75 469.25,-73.75 469.25,-109.75"/>
<text text-anchor="middle" x="442.25" y="-86.33" font-family="Arial" font-size="14.00">create</text>
</g>
<!-- call_openai_api&#45;&gt;create -->
<g id="edge29" class="edge">
<title>call_openai_api&#45;&gt;create</title>
<path fill="none" stroke="black" d="M428.89,-147.32C430.84,-139.34 433.16,-129.87 435.31,-121.08"/>
<polygon fill="black" stroke="black" points="438.66,-122.12 437.64,-111.57 431.86,-120.45 438.66,-122.12"/>
</g>
<!-- initialize_openai_client -->
<g id="node2" class="node">
<title>initialize_openai_client</title>
<g id="a_node2"><a xlink:title="Initialize the OpenAI client with an API key.">
<polygon fill="lightblue" stroke="black" points="275.75,-187 124.75,-187 124.75,-147.5 275.75,-147.5 275.75,-187"/>
<text text-anchor="middle" x="200.25" y="-169.7" font-family="Arial" font-size="14.00">initialize_openai_client</text>
<text text-anchor="middle" x="200.25" y="-153.95" font-family="Arial" font-size="14.00">(api_key, config_path)</text>
</a>
</g>
</g>
<!-- OpenAI -->
<g id="node13" class="node">
<title>OpenAI</title>
<polygon fill="lightblue" stroke="black" points="155.5,-109.75 93,-109.75 93,-73.75 155.5,-73.75 155.5,-109.75"/>
<text text-anchor="middle" x="124.25" y="-86.33" font-family="Arial" font-size="14.00">OpenAI</text>
</g>
<!-- initialize_openai_client&#45;&gt;OpenAI -->
<g id="edge1" class="edge">
<title>initialize_openai_client&#45;&gt;OpenAI</title>
<path fill="none" stroke="black" d="M168.7,-147.32C158.09,-138.62 146.94,-128.16 138.14,-118.73"/>
<polygon fill="black" stroke="black" points="140.77,-116.42 131.53,-111.24 135.52,-121.05 140.77,-116.42"/>
</g>
<!-- initialize_openai_client&#45;&gt;OpenAI -->
<g id="edge7" class="edge">
<title>initialize_openai_client&#45;&gt;OpenAI</title>
<path fill="none" stroke="black" d="M180.68,-147.32C171.4,-138.35 160.19,-127.51 150.21,-117.86"/>
<polygon fill="black" stroke="black" points="152.9,-115.59 143.28,-111.16 148.04,-120.62 152.9,-115.59"/>
</g>
<!-- initialize_openai_client&#45;&gt;OpenAI -->
<g id="edge11" class="edge">
<title>initialize_openai_client&#45;&gt;OpenAI</title>
<path fill="none" stroke="black" d="M192.65,-147.32C184.89,-138.17 173.69,-127.07 162.43,-117.28"/>
<polygon fill="black" stroke="black" points="164.93,-114.81 155.02,-111.07 160.44,-120.18 164.93,-114.81"/>
</g>
<!-- debug -->
<g id="node14" class="node">
<title>debug</title>
<polygon fill="lightblue" stroke="black" points="227.25,-109.75 173.25,-109.75 173.25,-73.75 227.25,-73.75 227.25,-109.75"/>
<text text-anchor="middle" x="200.25" y="-86.33" font-family="Arial" font-size="14.00">debug</text>
</g>
<!-- initialize_openai_client&#45;&gt;debug -->
<g id="edge2" class="edge">
<title>initialize_openai_client&#45;&gt;debug</title>
<path fill="none" stroke="black" d="M188.27,-147.32C186.81,-139.43 186.4,-130.08 187.05,-121.38"/>
<polygon fill="black" stroke="black" points="190.5,-121.98 188.38,-111.6 183.56,-121.04 190.5,-121.98"/>
</g>
<!-- initialize_openai_client&#45;&gt;debug -->
<g id="edge8" class="edge">
<title>initialize_openai_client&#45;&gt;debug</title>
<path fill="none" stroke="black" d="M200.25,-147.32C200.25,-139.43 200.25,-130.08 200.25,-121.38"/>
<polygon fill="black" stroke="black" points="203.75,-121.62 200.25,-111.62 196.75,-121.62 203.75,-121.62"/>
</g>
<!-- initialize_openai_client&#45;&gt;debug -->
<g id="edge12" class="edge">
<title>initialize_openai_client&#45;&gt;debug</title>
<path fill="none" stroke="black" d="M212.23,-147.32C213.69,-139.43 214.1,-130.08 213.45,-121.38"/>
<polygon fill="black" stroke="black" points="216.94,-121.04 212.12,-111.6 210,-121.98 216.94,-121.04"/>
</g>
<!-- open -->
<g id="node15" class="node">
<title>open</title>
<polygon fill="lightblue" stroke="black" points="299.25,-109.75 245.25,-109.75 245.25,-73.75 299.25,-73.75 299.25,-109.75"/>
<text text-anchor="middle" x="272.25" y="-86.33" font-family="Arial" font-size="14.00">open</text>
</g>
<!-- initialize_openai_client&#45;&gt;open -->
<g id="edge3" class="edge">
<title>initialize_openai_client&#45;&gt;open</title>
<path fill="none" stroke="black" d="M218.79,-147.32C227.49,-138.44 237.99,-127.72 247.37,-118.15"/>
<polygon fill="black" stroke="black" points="249.69,-120.78 254.19,-111.18 244.69,-115.88 249.69,-120.78"/>
</g>
<!-- safe_load -->
<g id="node16" class="node">
<title>safe_load</title>
<polygon fill="lightblue" stroke="black" points="74.5,-109.75 0,-109.75 0,-73.75 74.5,-73.75 74.5,-109.75"/>
<text text-anchor="middle" x="37.25" y="-86.33" font-family="Arial" font-size="14.00">safe_load</text>
</g>
<!-- initialize_openai_client&#45;&gt;safe_load -->
<g id="edge4" class="edge">
<title>initialize_openai_client&#45;&gt;safe_load</title>
<path fill="none" stroke="black" d="M157.85,-147.13C135.6,-137.1 108.25,-124.77 85.23,-114.39"/>
<polygon fill="black" stroke="black" points="86.93,-111.31 76.37,-110.39 84.05,-117.69 86.93,-111.31"/>
</g>
<!-- get -->
<g id="node17" class="node">
<title>get</title>
<polygon fill="lightblue" stroke="black" points="850.25,-109.75 796.25,-109.75 796.25,-73.75 850.25,-73.75 850.25,-109.75"/>
<text text-anchor="middle" x="823.25" y="-86.33" font-family="Arial" font-size="14.00">get</text>
</g>
<!-- initialize_openai_client&#45;&gt;get -->
<g id="edge5" class="edge">
<title>initialize_openai_client&#45;&gt;get</title>
<path fill="none" stroke="black" d="M247.73,-147C258,-144.05 268.88,-141.37 279.25,-139.5 479.08,-103.51 534.4,-141.28 735.25,-111.5 751.63,-109.07 769.62,-104.92 785.15,-101.14"/>
<polygon fill="black" stroke="black" points="785.63,-104.63 794.5,-98.85 783.96,-97.83 785.63,-104.63"/>
</g>
<!-- initialize_openai_client&#45;&gt;get -->
<g id="edge10" class="edge">
<title>initialize_openai_client&#45;&gt;get</title>
<path fill="none" stroke="black" d="M265.42,-147C276,-144.05 286.88,-141.37 297.25,-139.5 497.08,-103.51 552.4,-141.28 753.25,-111.5 763.58,-109.97 774.55,-107.75 784.71,-105.38"/>
<polygon fill="black" stroke="black" points="785.41,-108.81 794.28,-103.02 783.74,-102.01 785.41,-108.81"/>
</g>
<!-- initialize_openai_client&#45;&gt;ValueError -->
<g id="edge6" class="edge">
<title>initialize_openai_client&#45;&gt;ValueError</title>
<path fill="none" stroke="black" d="M235.08,-147.13C256.13,-136.84 283.22,-124.13 306.59,-113.59"/>
<polygon fill="black" stroke="black" points="307.95,-116.81 315.64,-109.53 305.08,-110.43 307.95,-116.81"/>
</g>
<!-- initialize_openai_client&#45;&gt;ValueError -->
<g id="edge13" class="edge">
<title>initialize_openai_client&#45;&gt;ValueError</title>
<path fill="none" stroke="black" d="M247.1,-147.13C268.9,-137.34 294.57,-125.37 315.67,-115.15"/>
<polygon fill="black" stroke="black" points="317.13,-118.33 324.58,-110.8 314.06,-112.04 317.13,-118.33"/>
</g>
<!-- error -->
<g id="node19" class="node">
<title>error</title>
<polygon fill="lightblue" stroke="black" points="1295.25,-109.75 1241.25,-109.75 1241.25,-73.75 1295.25,-73.75 1295.25,-109.75"/>
<text text-anchor="middle" x="1268.25" y="-86.33" font-family="Arial" font-size="14.00">error</text>
</g>
<!-- initialize_openai_client&#45;&gt;error -->
<g id="edge9" class="edge">
<title>initialize_openai_client&#45;&gt;error</title>
<path fill="none" stroke="black" d="M255.11,-147.13C265.97,-144.05 277.38,-141.28 288.25,-139.5 491.82,-106.15 1011.01,-162.44 1229.71,-111.35"/>
<polygon fill="black" stroke="black" points="1230.51,-114.76 1239.37,-108.95 1228.83,-107.96 1230.51,-114.76"/>
</g>
<!-- create_email_category_enum -->
<g id="node3" class="node">
<title>create_email_category_enum</title>
<g id="a_node3"><a xlink:title="Create a dynamic EmailCategory enum with the given categories.">
<polygon fill="lightblue" stroke="black" points="1218.88,-187 1023.62,-187 1023.62,-147.5 1218.88,-147.5 1218.88,-187"/>
<text text-anchor="middle" x="1121.25" y="-169.7" font-family="Arial" font-size="14.00">create_email_category_enum</text>
<text text-anchor="middle" x="1121.25" y="-153.95" font-family="Arial" font-size="14.00">(categories)</text>
</a>
</g>
</g>
<!-- upper -->
<g id="node27" class="node">
<title>upper</title>
<polygon fill="lightblue" stroke="black" points="1450.25,-36 1396.25,-36 1396.25,0 1450.25,0 1450.25,-36"/>
<text text-anchor="middle" x="1423.25" y="-12.57" font-family="Arial" font-size="14.00">upper</text>
</g>
<!-- create_email_category_enum&#45;&gt;upper -->
<g id="edge58" class="edge">
<title>create_email_category_enum&#45;&gt;upper</title>
<path fill="none" stroke="black" d="M1104.05,-147.16C1086.09,-124.87 1063.23,-88 1084.25,-64 1103.8,-41.68 1299.49,-26.78 1384.34,-21.32"/>
<polygon fill="black" stroke="black" points="1384.52,-24.82 1394.28,-20.69 1384.08,-17.83 1384.52,-24.82"/>
</g>
<!-- auto -->
<g id="node33" class="node">
<title>auto</title>
<polygon fill="lightblue" stroke="black" points="965.25,-109.75 911.25,-109.75 911.25,-73.75 965.25,-73.75 965.25,-109.75"/>
<text text-anchor="middle" x="938.25" y="-86.33" font-family="Arial" font-size="14.00">auto</text>
</g>
<!-- create_email_category_enum&#45;&gt;auto -->
<g id="edge59" class="edge">
<title>create_email_category_enum&#45;&gt;auto</title>
<path fill="none" stroke="black" d="M1064.75,-147.05C1039.62,-138.09 1009.59,-126.81 975.73,-111.94"/>
<polygon fill="black" stroke="black" points="977.54,-108.92 966.98,-108.05 974.69,-115.31 977.54,-108.92"/>
</g>
<!-- Enum -->
<g id="node34" class="node">
<title>Enum</title>
<polygon fill="lightblue" stroke="black" points="1037.25,-109.75 983.25,-109.75 983.25,-73.75 1037.25,-73.75 1037.25,-109.75"/>
<text text-anchor="middle" x="1010.25" y="-86.33" font-family="Arial" font-size="14.00">Enum</text>
</g>
<!-- create_email_category_enum&#45;&gt;Enum -->
<g id="edge60" class="edge">
<title>create_email_category_enum&#45;&gt;Enum</title>
<path fill="none" stroke="black" d="M1092.38,-147.13C1078.15,-137.71 1060.86,-126.26 1045.83,-116.31"/>
<polygon fill="black" stroke="black" points="1047.86,-113.45 1037.59,-110.85 1043.99,-119.29 1047.86,-113.45"/>
</g>
<!-- create_system_prompt -->
<g id="node4" class="node">
<title>create_system_prompt</title>
<g id="a_node4"><a xlink:title="Create the system prompt for the OpenAI API.">
<polygon fill="lightblue" stroke="black" points="1413.12,-187 1237.38,-187 1237.38,-147.5 1413.12,-147.5 1413.12,-187"/>
<text text-anchor="middle" x="1325.25" y="-169.7" font-family="Arial" font-size="14.00">create_system_prompt</text>
<text text-anchor="middle" x="1325.25" y="-153.95" font-family="Arial" font-size="14.00">(category_info, categories)</text>
</a>
</g>
</g>
<!-- dumps -->
<g id="node22" class="node">
<title>dumps</title>
<polygon fill="lightblue" stroke="black" points="1222.88,-109.75 1165.62,-109.75 1165.62,-73.75 1222.88,-73.75 1222.88,-109.75"/>
<text text-anchor="middle" x="1194.25" y="-86.33" font-family="Arial" font-size="14.00">dumps</text>
</g>
<!-- create_system_prompt&#45;&gt;dumps -->
<g id="edge20" class="edge">
<title>create_system_prompt&#45;&gt;dumps</title>
<path fill="none" stroke="black" d="M1291.17,-147.13C1273.39,-137.15 1251.56,-124.9 1233.12,-114.56"/>
<polygon fill="black" stroke="black" points="1235.03,-111.62 1224.59,-109.77 1231.6,-117.72 1235.03,-111.62"/>
</g>
<!-- join -->
<g id="node23" class="node">
<title>join</title>
<polygon fill="lightblue" stroke="black" points="1147.25,-109.75 1093.25,-109.75 1093.25,-73.75 1147.25,-73.75 1147.25,-109.75"/>
<text text-anchor="middle" x="1120.25" y="-86.33" font-family="Arial" font-size="14.00">join</text>
</g>
<!-- create_system_prompt&#45;&gt;join -->
<g id="edge21" class="edge">
<title>create_system_prompt&#45;&gt;join</title>
<path fill="none" stroke="black" d="M1257.28,-147.07C1228.75,-138.36 1195.18,-127.25 1158.09,-111.98"/>
<polygon fill="black" stroke="black" points="1159.51,-108.78 1148.94,-108.15 1156.81,-115.24 1159.51,-108.78"/>
</g>
<!-- create_user_prompt -->
<g id="node5" class="node">
<title>create_user_prompt</title>
<g id="a_node5"><a xlink:title="Create the user prompt for the OpenAI API.">
<polygon fill="lightblue" stroke="black" points="1006,-187 868.5,-187 868.5,-147.5 1006,-147.5 1006,-187"/>
<text text-anchor="middle" x="937.25" y="-169.7" font-family="Arial" font-size="14.00">create_user_prompt</text>
<text text-anchor="middle" x="937.25" y="-153.95" font-family="Arial" font-size="14.00">(emails, batch_size)</text>
</a>
</g>
</g>
<!-- create_user_prompt&#45;&gt;get -->
<g id="edge23" class="edge">
<title>create_user_prompt&#45;&gt;get</title>
<path fill="none" stroke="black" d="M883.57,-147.13C866.03,-137.98 848.35,-126.92 835.52,-117.16"/>
<polygon fill="black" stroke="black" points="837.87,-114.57 827.91,-110.97 833.45,-120 837.87,-114.57"/>
</g>
<!-- create_user_prompt&#45;&gt;get -->
<g id="edge24" class="edge">
<title>create_user_prompt&#45;&gt;get</title>
<path fill="none" stroke="black" d="M895.58,-147.13C879.41,-137.8 861.61,-126.48 847.5,-116.59"/>
<polygon fill="black" stroke="black" points="849.77,-113.91 839.61,-110.9 845.67,-119.59 849.77,-113.91"/>
</g>
<!-- create_user_prompt&#45;&gt;get -->
<g id="edge25" class="edge">
<title>create_user_prompt&#45;&gt;get</title>
<path fill="none" stroke="black" d="M907.6,-147.13C892.84,-137.62 874.89,-126.05 859.35,-116.02"/>
<polygon fill="black" stroke="black" points="861.6,-113.31 851.3,-110.84 857.81,-119.2 861.6,-113.31"/>
</g>
<!-- create_user_prompt&#45;&gt;get -->
<g id="edge26" class="edge">
<title>create_user_prompt&#45;&gt;get</title>
<path fill="none" stroke="black" d="M919.61,-147.13C903.65,-135.47 880.59,-120.7 860.76,-109.5"/>
<polygon fill="black" stroke="black" points="862.52,-106.47 852.07,-104.73 859.16,-112.61 862.52,-106.47"/>
</g>
<!-- create_user_prompt&#45;&gt;get -->
<g id="edge27" class="edge">
<title>create_user_prompt&#45;&gt;get</title>
<path fill="none" stroke="black" d="M931.85,-147.32C915.7,-133.64 886.47,-115.61 861,-104.09"/>
<polygon fill="black" stroke="black" points="862.7,-101.01 852.13,-100.33 859.97,-107.46 862.7,-101.01"/>
</g>
<!-- enumerate -->
<g id="node24" class="node">
<title>enumerate</title>
<polygon fill="lightblue" stroke="black" points="1394.88,-109.75 1313.62,-109.75 1313.62,-73.75 1394.88,-73.75 1394.88,-109.75"/>
<text text-anchor="middle" x="1354.25" y="-86.33" font-family="Arial" font-size="14.00">enumerate</text>
</g>
<!-- create_user_prompt&#45;&gt;enumerate -->
<g id="edge22" class="edge">
<title>create_user_prompt&#45;&gt;enumerate</title>
<path fill="none" stroke="black" d="M986.87,-147.08C995.88,-144.16 1005.26,-141.47 1014.25,-139.5 1137.29,-112.59 1175.99,-139.17 1302.44,-111.54"/>
<polygon fill="black" stroke="black" points="1302.86,-115.03 1311.84,-109.41 1301.31,-108.2 1302.86,-115.03"/>
</g>
<!-- validate_and_normalize_category -->
<g id="node6" class="node">
<title>validate_and_normalize_category</title>
<g id="a_node6"><a xlink:title="Validate and normalize a category in a result.">
<polygon fill="lightblue" stroke="black" points="1741.5,-111.5 1523,-111.5 1523,-72 1741.5,-72 1741.5,-111.5"/>
<text text-anchor="middle" x="1632.25" y="-94.2" font-family="Arial" font-size="14.00">validate_and_normalize_category</text>
<text text-anchor="middle" x="1632.25" y="-78.45" font-family="Arial" font-size="14.00">(result, valid_categories)</text>
</a>
</g>
</g>
<!-- validate_and_normalize_category&#45;&gt;upper -->
<g id="edge31" class="edge">
<title>validate_and_normalize_category&#45;&gt;upper</title>
<path fill="none" stroke="black" d="M1576.24,-71.52C1539.9,-59.05 1493.5,-43.12 1461.38,-32.09"/>
<polygon fill="black" stroke="black" points="1462.68,-28.84 1452.09,-28.9 1460.41,-35.46 1462.68,-28.84"/>
</g>
<!-- warning -->
<g id="node28" class="node">
<title>warning</title>
<polygon fill="lightblue" stroke="black" points="1663.88,-36 1600.62,-36 1600.62,0 1663.88,0 1663.88,-36"/>
<text text-anchor="middle" x="1632.25" y="-12.57" font-family="Arial" font-size="14.00">warning</text>
</g>
<!-- validate_and_normalize_category&#45;&gt;warning -->
<g id="edge32" class="edge">
<title>validate_and_normalize_category&#45;&gt;warning</title>
<path fill="none" stroke="black" d="M1632.25,-71.52C1632.25,-64.25 1632.25,-55.79 1632.25,-47.83"/>
<polygon fill="black" stroke="black" points="1635.75,-47.83 1632.25,-37.83 1628.75,-47.83 1635.75,-47.83"/>
</g>
<!-- parse_openai_response -->
<g id="node7" class="node">
<title>parse_openai_response</title>
<g id="a_node7"><a xlink:title="Parse the OpenAI API response.">
<polygon fill="lightblue" stroke="black" points="1899,-187 1647.5,-187 1647.5,-147.5 1899,-147.5 1899,-187"/>
<text text-anchor="middle" x="1773.25" y="-169.7" font-family="Arial" font-size="14.00">parse_openai_response</text>
<text text-anchor="middle" x="1773.25" y="-153.95" font-family="Arial" font-size="14.00">(response_text, categories, batch_size)</text>
</a>
</g>
</g>
<!-- parse_openai_response&#45;&gt;validate_and_normalize_category -->
<g id="edge36" class="edge">
<title>parse_openai_response&#45;&gt;validate_and_normalize_category</title>
<path fill="none" stroke="black" d="M1736.57,-147.13C1718.95,-137.94 1697.63,-126.83 1678.86,-117.05"/>
<polygon fill="black" stroke="black" points="1680.57,-113.99 1670.09,-112.47 1677.34,-120.2 1680.57,-113.99"/>
</g>
<!-- extract_json_objects -->
<g id="node8" class="node">
<title>extract_json_objects</title>
<g id="a_node8"><a xlink:title="Extract JSON objects from a text response.">
<polygon fill="lightblue" stroke="black" points="1898.75,-111.5 1759.75,-111.5 1759.75,-72 1898.75,-72 1898.75,-111.5"/>
<text text-anchor="middle" x="1829.25" y="-94.2" font-family="Arial" font-size="14.00">extract_json_objects</text>
<text text-anchor="middle" x="1829.25" y="-78.45" font-family="Arial" font-size="14.00">(response_text)</text>
</a>
</g>
</g>
<!-- parse_openai_response&#45;&gt;extract_json_objects -->
<g id="edge33" class="edge">
<title>parse_openai_response&#45;&gt;extract_json_objects</title>
<path fill="none" stroke="black" d="M1787.67,-147.32C1793.83,-139.24 1801.14,-129.64 1807.91,-120.76"/>
<polygon fill="black" stroke="black" points="1810.49,-123.15 1813.77,-113.07 1804.92,-118.91 1810.49,-123.15"/>
</g>
<!-- parse_openai_response&#45;&gt;error -->
<g id="edge38" class="edge">
<title>parse_openai_response&#45;&gt;error</title>
<path fill="none" stroke="black" d="M1647,-157.26C1533.88,-148.06 1375.46,-132.58 1302.2,-113.25"/>
<polygon fill="black" stroke="black" points="1303.23,-109.91 1292.65,-110.53 1301.31,-116.64 1303.23,-109.91"/>
</g>
<!-- parse_openai_response&#45;&gt;error -->
<g id="edge40" class="edge">
<title>parse_openai_response&#45;&gt;error</title>
<path fill="none" stroke="black" d="M1647.21,-156.12C1533.1,-146.3 1373.98,-130.17 1313.25,-111.5 1310.75,-110.73 1308.22,-109.79 1305.69,-108.75"/>
<polygon fill="black" stroke="black" points="1307.31,-105.64 1296.76,-104.65 1304.39,-112 1307.31,-105.64"/>
</g>
<!-- append -->
<g id="node21" class="node">
<title>append</title>
<polygon fill="lightblue" stroke="black" points="1977.75,-109.75 1916.75,-109.75 1916.75,-73.75 1977.75,-73.75 1977.75,-109.75"/>
<text text-anchor="middle" x="1947.25" y="-86.33" font-family="Arial" font-size="14.00">append</text>
</g>
<!-- parse_openai_response&#45;&gt;append -->
<g id="edge37" class="edge">
<title>parse_openai_response&#45;&gt;append</title>
<path fill="none" stroke="black" d="M1809.05,-147.08C1833.31,-137.09 1865.24,-124.31 1893.25,-111.5 1897.47,-109.57 1901.91,-107.39 1906.47,-105.22"/>
<polygon fill="black" stroke="black" points="1907.62,-108.54 1915.26,-101.2 1904.71,-102.17 1907.62,-108.54"/>
</g>
<!-- parse_openai_response&#45;&gt;append -->
<g id="edge39" class="edge">
<title>parse_openai_response&#45;&gt;append</title>
<path fill="none" stroke="black" d="M1825.22,-147.08C1848.56,-138.14 1876.57,-126.98 1905.9,-113.84"/>
<polygon fill="black" stroke="black" points="1907.28,-117.06 1914.95,-109.74 1904.39,-110.68 1907.28,-117.06"/>
</g>
<!-- parse_openai_response&#45;&gt;append -->
<g id="edge42" class="edge">
<title>parse_openai_response&#45;&gt;append</title>
<path fill="none" stroke="black" d="M1841.39,-147.08C1866.15,-138.22 1894.06,-127.17 1921.48,-114.97"/>
<polygon fill="black" stroke="black" points="1922.91,-118.16 1930.58,-110.86 1920.03,-111.78 1922.91,-118.16"/>
</g>
<!-- parse_openai_response&#45;&gt;upper -->
<g id="edge34" class="edge">
<title>parse_openai_response&#45;&gt;upper</title>
<path fill="none" stroke="black" d="M1647.3,-152.33C1560.2,-141.54 1457.36,-126.04 1442.25,-111.5 1425.36,-95.25 1421.41,-68.31 1421.21,-47.68"/>
<polygon fill="black" stroke="black" points="1424.71,-47.98 1421.43,-37.91 1417.71,-47.83 1424.71,-47.98"/>
</g>
<!-- loads -->
<g id="node29" class="node">
<title>loads</title>
<polygon fill="lightblue" stroke="black" points="1505.25,-109.75 1451.25,-109.75 1451.25,-73.75 1505.25,-73.75 1505.25,-109.75"/>
<text text-anchor="middle" x="1478.25" y="-86.33" font-family="Arial" font-size="14.00">loads</text>
</g>
<!-- parse_openai_response&#45;&gt;loads -->
<g id="edge35" class="edge">
<title>parse_openai_response&#45;&gt;loads</title>
<path fill="none" stroke="black" d="M1647.05,-148.08C1606.38,-140.25 1561.33,-129.46 1516.21,-113.08"/>
<polygon fill="black" stroke="black" points="1517.68,-109.9 1507.09,-109.68 1515.24,-116.46 1517.68,-109.9"/>
</g>
<!-- len -->
<g id="node30" class="node">
<title>len</title>
<polygon fill="lightblue" stroke="black" points="2381.25,-109.75 2327.25,-109.75 2327.25,-73.75 2381.25,-73.75 2381.25,-109.75"/>
<text text-anchor="middle" x="2354.25" y="-86.33" font-family="Arial" font-size="14.00">len</text>
</g>
<!-- parse_openai_response&#45;&gt;len -->
<g id="edge41" class="edge">
<title>parse_openai_response&#45;&gt;len</title>
<path fill="none" stroke="black" d="M1866.59,-147.02C1881.49,-144.28 1896.77,-141.66 1911.25,-139.5 2060.21,-117.24 2238.91,-101.79 2315.89,-95.68"/>
<polygon fill="black" stroke="black" points="2315.72,-99.2 2325.42,-94.93 2315.17,-92.22 2315.72,-99.2"/>
</g>
<!-- findall -->
<g id="node26" class="node">
<title>findall</title>
<polygon fill="lightblue" stroke="black" points="1856.25,-36 1802.25,-36 1802.25,0 1856.25,0 1856.25,-36"/>
<text text-anchor="middle" x="1829.25" y="-12.57" font-family="Arial" font-size="14.00">findall</text>
</g>
<!-- extract_json_objects&#45;&gt;findall -->
<g id="edge30" class="edge">
<title>extract_json_objects&#45;&gt;findall</title>
<path fill="none" stroke="black" d="M1829.25,-71.52C1829.25,-64.25 1829.25,-55.79 1829.25,-47.83"/>
<polygon fill="black" stroke="black" points="1832.75,-47.83 1829.25,-37.83 1825.75,-47.83 1832.75,-47.83"/>
</g>
<!-- prepare_category_info -->
<g id="node9" class="node">
<title>prepare_category_info</title>
<g id="a_node9"><a xlink:title="Extract category information from an account.">
<polygon fill="lightblue" stroke="black" points="2097.75,-187 1946.75,-187 1946.75,-147.5 2097.75,-147.5 2097.75,-187"/>
<text text-anchor="middle" x="2022.25" y="-169.7" font-family="Arial" font-size="14.00">prepare_category_info</text>
<text text-anchor="middle" x="2022.25" y="-153.95" font-family="Arial" font-size="14.00">(account)</text>
</a>
</g>
</g>
<!-- prepare_category_info&#45;&gt;append -->
<g id="edge19" class="edge">
<title>prepare_category_info&#45;&gt;append</title>
<path fill="none" stroke="black" d="M2002.94,-147.32C1993.87,-138.44 1982.94,-127.72 1973.17,-118.15"/>
<polygon fill="black" stroke="black" points="1975.63,-115.66 1966.04,-111.16 1970.73,-120.66 1975.63,-115.66"/>
</g>
<!-- batch_categorize_emails_for_account -->
<g id="node10" class="node">
<title>batch_categorize_emails_for_account</title>
<g id="a_node10"><a xlink:title="Categorize a batch of emails for a specific account.">
<polygon fill="lightblue" stroke="black" points="2167.25,-267 1923.25,-267 1923.25,-227.5 2167.25,-227.5 2167.25,-267"/>
<text text-anchor="middle" x="2045.25" y="-249.7" font-family="Arial" font-size="14.00">batch_categorize_emails_for_account</text>
<text text-anchor="middle" x="2045.25" y="-233.95" font-family="Arial" font-size="14.00">(emails, account, batch_size, model)</text>
</a>
</g>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;call_openai_api -->
<g id="edge48" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;call_openai_api</title>
<path fill="none" stroke="black" d="M1922.99,-246.44C1591.59,-246.62 692.06,-244.74 560.25,-219.5 530.98,-213.89 499.76,-202.55 474.63,-191.96"/>
<polygon fill="black" stroke="black" points="476.21,-188.83 465.65,-188.08 473.44,-195.26 476.21,-188.83"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;create_system_prompt -->
<g id="edge46" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;create_system_prompt</title>
<path fill="none" stroke="black" d="M1922.82,-247.01C1769.95,-246.91 1517.54,-242.98 1427.25,-219.5 1405.5,-213.84 1383.01,-203.15 1364.7,-192.98"/>
<polygon fill="black" stroke="black" points="1366.45,-189.95 1356.03,-188.01 1362.97,-196.02 1366.45,-189.95"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;create_user_prompt -->
<g id="edge47" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;create_user_prompt</title>
<path fill="none" stroke="black" d="M1922.99,-246.87C1668.57,-247.62 1098.69,-246.23 1014.25,-219.5 997.46,-214.18 980.92,-204.01 967.5,-194.13"/>
<polygon fill="black" stroke="black" points="970,-191.64 959.94,-188.31 965.73,-197.18 970,-191.64"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;parse_openai_response -->
<g id="edge49" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;parse_openai_response</title>
<path fill="none" stroke="black" d="M1940.62,-227.04C1930.64,-224.7 1920.72,-222.19 1911.25,-219.5 1884.05,-211.79 1854.59,-201.17 1829.9,-191.6"/>
<polygon fill="black" stroke="black" points="1831.27,-188.38 1820.68,-187.98 1828.71,-194.89 1831.27,-188.38"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;prepare_category_info -->
<g id="edge45" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;prepare_category_info</title>
<path fill="none" stroke="black" d="M2039.68,-227.37C2037.12,-218.68 2034.02,-208.17 2031.15,-198.42"/>
<polygon fill="black" stroke="black" points="2034.54,-197.55 2028.35,-188.95 2027.83,-199.53 2034.54,-197.55"/>
</g>
<!-- log_openai_interaction -->
<g id="node12" class="node">
<title>log_openai_interaction</title>
<g id="a_node12"><a xlink:title="Log OpenAI API interaction for debugging.">
<polygon fill="lightblue" stroke="black" points="843.75,-187 572.75,-187 572.75,-147.5 843.75,-147.5 843.75,-187"/>
<text text-anchor="middle" x="708.25" y="-169.7" font-family="Arial" font-size="14.00">log_openai_interaction</text>
<text text-anchor="middle" x="708.25" y="-153.95" font-family="Arial" font-size="14.00">(email, prompt, response, category_result)</text>
</a>
</g>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;log_openai_interaction -->
<g id="edge52" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;log_openai_interaction</title>
<path fill="none" stroke="black" d="M1923,-245.67C1638.87,-244.01 950.48,-238.06 847.25,-219.5 815.5,-213.79 781.38,-202.36 754.82,-191.75"/>
<polygon fill="black" stroke="black" points="756.27,-188.56 745.69,-188 753.61,-195.03 756.27,-188.56"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;log_openai_interaction -->
<g id="edge56" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;log_openai_interaction</title>
<path fill="none" stroke="black" d="M1922.97,-245.62C1642.11,-243.88 967.37,-237.86 865.25,-219.5 833.21,-213.74 798.78,-202.16 770.27,-191.46"/>
<polygon fill="black" stroke="black" points="771.66,-188.25 761.07,-187.96 769.17,-194.79 771.66,-188.25"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;error -->
<g id="edge53" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;error</title>
<path fill="none" stroke="black" d="M1922.97,-244.12C1755.65,-240.72 1473.83,-233.01 1455.25,-219.5 1424.54,-197.17 1453.81,-164.53 1425.25,-139.5 1386.25,-105.32 1359.44,-127.53 1306.1,-111.43"/>
<polygon fill="black" stroke="black" points="1307.47,-108.2 1296.87,-108.3 1305.22,-114.83 1307.47,-108.2"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;enumerate -->
<g id="edge50" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;enumerate</title>
<path fill="none" stroke="black" d="M1922.93,-245.81C1773.94,-244.43 1537.76,-239.14 1502.25,-219.5 1464.27,-198.5 1479.53,-167.35 1446.25,-139.5 1434.09,-129.32 1419.34,-120.87 1405.22,-114.07"/>
<polygon fill="black" stroke="black" points="1407.01,-111.04 1396.46,-110.05 1404.09,-117.4 1407.01,-111.04"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;enumerate -->
<g id="edge55" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;enumerate</title>
<path fill="none" stroke="black" d="M1923,-245.68C1778.93,-244.12 1554.77,-238.59 1520.25,-219.5 1482.27,-198.5 1497.53,-167.35 1464.25,-139.5 1447.37,-125.38 1425.52,-114.56 1405.66,-106.92"/>
<polygon fill="black" stroke="black" points="1406.9,-103.64 1396.31,-103.51 1404.51,-110.22 1406.9,-103.64"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;len -->
<g id="edge44" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;len</title>
<path fill="none" stroke="black" d="M2167.56,-227.57C2167.79,-227.55 2168.02,-227.52 2168.25,-227.5 2184.75,-225.89 2304.61,-230.23 2317.25,-219.5 2345.34,-195.67 2348.98,-150.59 2350.27,-121.11"/>
<polygon fill="black" stroke="black" points="2353.76,-121.56 2350.67,-111.43 2346.76,-121.28 2353.76,-121.56"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;len -->
<g id="edge51" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;len</title>
<path fill="none" stroke="black" d="M2167.57,-229.5C2173.89,-228.77 2180.15,-228.1 2186.25,-227.5 2202.75,-225.89 2322.61,-230.23 2335.25,-219.5 2363.34,-195.67 2366.98,-150.59 2363.59,-121.11"/>
<polygon fill="black" stroke="black" points="2367.07,-120.75 2362.07,-111.41 2360.16,-121.83 2367.07,-120.75"/>
</g>
<!-- min -->
<g id="node31" class="node">
<title>min</title>
<polygon fill="lightblue" stroke="black" points="2317.25,-185.25 2263.25,-185.25 2263.25,-149.25 2317.25,-149.25 2317.25,-185.25"/>
<text text-anchor="middle" x="2290.25" y="-161.82" font-family="Arial" font-size="14.00">min</text>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;min -->
<g id="edge43" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;min</title>
<path fill="none" stroke="black" d="M2167.48,-228.69C2170.77,-228.28 2174.03,-227.89 2177.25,-227.5 2195.43,-225.32 2243.76,-229.26 2259.25,-219.5 2268.1,-213.92 2274.79,-204.81 2279.64,-195.81"/>
<polygon fill="black" stroke="black" points="2282.75,-197.41 2283.86,-186.87 2276.42,-194.42 2282.75,-197.41"/>
</g>
<!-- str -->
<g id="node32" class="node">
<title>str</title>
<polygon fill="lightblue" stroke="black" points="2445.25,-185.25 2391.25,-185.25 2391.25,-149.25 2445.25,-149.25 2445.25,-185.25"/>
<text text-anchor="middle" x="2418.25" y="-161.82" font-family="Arial" font-size="14.00">str</text>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;str -->
<g id="edge54" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;str</title>
<path fill="none" stroke="black" d="M2167.56,-227.56C2167.79,-227.54 2168.02,-227.52 2168.25,-227.5 2190.4,-225.49 2348.4,-229.53 2368.25,-219.5 2379.12,-214.01 2388.05,-204.17 2395.43,-194.57"/>
<polygon fill="black" stroke="black" points="2398.04,-196.94 2401.15,-186.82 2392.4,-192.79 2398.04,-196.94"/>
</g>
<!-- batch_categorize_emails_for_account&#45;&gt;str -->
<g id="edge57" class="edge">
<title>batch_categorize_emails_for_account&#45;&gt;str</title>
<path fill="none" stroke="black" d="M2167.56,-229.4C2173.88,-228.7 2180.14,-228.05 2186.25,-227.5 2208.4,-225.49 2366.4,-229.53 2386.25,-219.5 2396.78,-214.18 2405.5,-204.78 2411.55,-195.47"/>
<polygon fill="black" stroke="black" points="2414.51,-197.36 2416.3,-186.92 2408.39,-193.96 2414.51,-197.36"/>
</g>
<!-- __str__ -->
<g id="node11" class="node">
<title>__str__</title>
<polygon fill="lightblue" stroke="black" points="2246.75,-267 2185.75,-267 2185.75,-227.5 2246.75,-227.5 2246.75,-267"/>
<text text-anchor="middle" x="2216.25" y="-249.7" font-family="Arial" font-size="14.00">__str__</text>
<text text-anchor="middle" x="2216.25" y="-233.95" font-family="Arial" font-size="14.00">(self)</text>
</g>
<!-- capitalize -->
<g id="node35" class="node">
<title>capitalize</title>
<polygon fill="lightblue" stroke="black" points="2535.38,-185.25 2463.12,-185.25 2463.12,-149.25 2535.38,-149.25 2535.38,-185.25"/>
<text text-anchor="middle" x="2499.25" y="-161.82" font-family="Arial" font-size="14.00">capitalize</text>
</g>
<!-- __str__&#45;&gt;capitalize -->
<g id="edge61" class="edge">
<title>__str__&#45;&gt;capitalize</title>
<path fill="none" stroke="black" d="M2247.24,-245.52C2303.29,-243.75 2418.96,-237.92 2454.25,-219.5 2465.27,-213.75 2474.82,-204.09 2482.25,-194.7"/>
<polygon fill="black" stroke="black" points="2484.97,-196.91 2488.06,-186.78 2479.33,-192.78 2484.97,-196.91"/>
</g>
<!-- log_openai_interaction&#45;&gt;get -->
<g id="edge15" class="edge">
<title>log_openai_interaction&#45;&gt;get</title>
<path fill="none" stroke="black" d="M726.15,-147.13C742.44,-135.34 766.04,-120.38 786.16,-109.13"/>
<polygon fill="black" stroke="black" points="787.56,-112.36 794.67,-104.51 784.22,-106.21 787.56,-112.36"/>
</g>
<!-- log_openai_interaction&#45;&gt;get -->
<g id="edge16" class="edge">
<title>log_openai_interaction&#45;&gt;get</title>
<path fill="none" stroke="black" d="M738.16,-147.13C753.05,-137.62 771.16,-126.05 786.84,-116.02"/>
<polygon fill="black" stroke="black" points="788.42,-119.16 794.96,-110.83 784.65,-113.27 788.42,-119.16"/>
</g>
<!-- log_openai_interaction&#45;&gt;get -->
<g id="edge17" class="edge">
<title>log_openai_interaction&#45;&gt;get</title>
<path fill="none" stroke="black" d="M750.18,-147.13C766.48,-137.8 784.43,-126.48 798.68,-116.59"/>
<polygon fill="black" stroke="black" points="800.55,-119.56 806.65,-110.89 796.48,-113.86 800.55,-119.56"/>
</g>
<!-- log_openai_interaction&#45;&gt;error -->
<g id="edge18" class="edge">
<title>log_openai_interaction&#45;&gt;error</title>
<path fill="none" stroke="black" d="M806.35,-147.04C822.96,-144.21 840.06,-141.56 856.25,-139.5 1018.91,-118.8 1068.93,-155.72 1230.03,-111.49"/>
<polygon fill="black" stroke="black" points="1230.67,-114.94 1239.35,-108.86 1228.78,-108.2 1230.67,-114.94"/>
</g>
<!-- info -->
<g id="node20" class="node">
<title>info</title>
<polygon fill="lightblue" stroke="black" points="735.25,-109.75 681.25,-109.75 681.25,-73.75 735.25,-73.75 735.25,-109.75"/>
<text text-anchor="middle" x="708.25" y="-86.33" font-family="Arial" font-size="14.00">info</text>
</g>
<!-- log_openai_interaction&#45;&gt;info -->
<g id="edge14" class="edge">
<title>log_openai_interaction&#45;&gt;info</title>
<path fill="none" stroke="black" d="M708.25,-147.32C708.25,-139.43 708.25,-130.08 708.25,-121.38"/>
<polygon fill="black" stroke="black" points="711.75,-121.62 708.25,-111.62 704.75,-121.62 711.75,-121.62"/>
</g>
</g>
</svg>
